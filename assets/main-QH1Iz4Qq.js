(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-switcher");if(!e){console.error("theme-switcher elementi bulunamadı!");return}e.addEventListener("click",()=>{document.body.classList.toggle("dark-mode")});const t=document.querySelector(".btn"),i=document.querySelector(".navbar");t.addEventListener("click",()=>{i.classList.toggle("active")});const a=document.querySelectorAll(".nav-menu a");a.forEach(r=>{r.addEventListener("click",()=>{a.forEach(f=>f.classList.remove("active")),r.classList.add("active")})});const o=window.location.pathname.split("/").pop(),n=Array.from(a).find(r=>r.href.includes(o));n&&n.classList.add("active")});async function I(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/week?language=tr-TR",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5ZWJmOWU4MzdkOWVmNGZlZDZiZTAzY2RlZTAyMTZiNSIsIm5iZiI6MTc0MjkxNzcyNC4zOTYsInN1YiI6IjY3ZTJkMDVjZDcwYzYxNTkwMzc1ZTgzNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.mGfFevHBMVfVG3Aha3atAbsBAX0sx3BUJdHGcEDZwAk"}})).json()).results}const A={28:"Aksiyon",12:"Macera",16:"Animasyon",35:"Komedi",80:"Suç",99:"Belgesel",18:"Dram",10751:"Aile",14:"Fantastik",36:"Tarih",27:"Korku",10402:"Müzik",9648:"Gizem",10749:"Romantik",878:"Bilim Kurgu",10770:"TV Filmi",53:"Gerilim",10752:"Savaş",37:"Western"};function x(e){return e.map(t=>A[t]||"Bilinmeyen").join(", ")}function T(e){const t=Math.floor(e/2),i=e%2!==0?1:0,a=5-t-i;let o="";for(let n=0;n<t;n++)o+='<i class="fa-solid fa-star"></i>';i&&(o+='<i class="fa-solid fa-star-half"></i>');for(let n=0;n<a;n++)o+='<i class="fa-regular fa-star"></i>';return o}async function k(){const e=await I();if(!e||e.length===0)return;const t=document.querySelector(".weekly-movies-container");t.innerHTML="";const i=window.innerWidth;let a=3;i<=768&&(a=1),e.slice(0,a).forEach(n=>{const r=document.createElement("div");r.classList.add("weekly-trend-movie");const f=x(n.genre_ids);r.innerHTML=`
      <div class="title">
        <h3>${n.title}</h3>
        <div class="movie-about">
          <div class="movie-title">
            <p>${f}</p>
            <span> | </span>
            <span>${n.release_date}</span>
          </div>

        </div>
        <div class="star-bar">${T(n.vote_average)}</div>
      </div>
    `,r.style.background=`linear-gradient(to bottom, #00000000 0%, #000000 100%), url('https://image.tmdb.org/t/p/w500${n.poster_path}')`,r.style.backgroundSize="cover",r.style.backgroundPosition="center",r.style.backgroundRepeat="no-repeat",t.appendChild(r)})}window.addEventListener("resize",k);k();async function q(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=04c35731a5ee918f014970082a0088b1")).json()).results}const C="https://image.tmdb.org/t/p/original";async function B(){const e=document.getElementById("upcoming-section");try{const t=await q();if(!t||t.length===0){e.innerHTML="<p>Gösterilecek film bulunamadı.</p>";return}const i=t[0];e.innerHTML=`
      <div class="upcoming-movie-card">
        <div class="movie-poster" style="background-image: url('${C}${i.backdrop_path}')"></div>
        <div class="movie-details">
          <h3 class="upcoming-movie-name">${i.title}</h3>
          <p class="movieabout">${i.overview}</p>
          <button class="btn-upcoming">Add to My Library</button>
        </div>
      </div>
    `}catch(t){console.error("Hata:",t),e.innerHTML="<p>Bir hata oluştu. Lütfen tekrar deneyin.</p>"}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("overlay"),t=document.getElementById("notification"),i=document.querySelector(".btn-upcoming"),a="myLibrary",o={id:123,title:"Example Movie"};let n=JSON.parse(localStorage.getItem(a))||[];i.addEventListener("click",function(){const u=n.some(y=>y.id===o.id);u?(e.style.display="none",t.classList.add("hidden")):(e.style.display="block",t.classList.remove("hidden"),setTimeout(()=>{e.style.display="none",t.classList.add("hidden")},2e3)),u?(n=n.filter(y=>y.id!==o.id),i.textContent="Add to My Library"):(n.push(o),i.textContent="Remove from My Library"),localStorage.setItem(a,JSON.stringify(n))});const r="04c35731a5ee918f014970082a0088b1",f="https://api.themoviedb.org/3",m=new Date,g=m.getFullYear(),h=String(m.getMonth()+1).padStart(2,"0"),v=`${g}-${h}-01`,w=new Date(g,h,0).getDate(),s=`${g}-${h}-${w}`,c={};fetch(`${f}/genre/movie/list?api_key=${r}`).then(u=>u.json()).then(u=>{u.genres.forEach(L=>{c[L.id]=L.name});const y=`${f}/discover/movie?api_key=${r}&primary_release_date.gte=${v}&primary_release_date.lte=${s}&sort_by=popularity.desc`;fetch(y).then(L=>L.json()).then(L=>{const S=L.results;if(!S||S.length===0){document.getElementById("no-movie-message").classList.remove("movie-hidden");return}let l=JSON.parse(localStorage.getItem("featuredUpcomingMovie"));l||(l=S[Math.floor(Math.random()*S.length)],localStorage.setItem("featuredUpcomingMovie",JSON.stringify(l))),console.log("Seçilen film:",l),document.querySelector(".movie-poster").style.backgroundImage=`url(https://image.tmdb.org/t/p/original${l.backdrop_path})`,document.querySelector(".upcoming-movie-name").textContent=l.title,document.querySelector(".info-date-value").textContent=l.release_date,document.querySelectorAll(".vote-box")[0].textContent=l.vote_average,document.querySelectorAll(".vote-box")[1].textContent=l.vote_count,document.querySelector(".info-popularity-value").textContent=Math.round(l.popularity),document.querySelector(".info-genre-value").textContent=l.genre_ids.map(p=>c[p]).join(", "),document.querySelector(".movieabout").textContent=l.overview;const d=document.querySelector(".btn-upcoming"),_="myLibrary";let b=JSON.parse(localStorage.getItem(_))||[],M=b.some(p=>p.id===l.id);d.textContent=M?"Remove from My Library":"Add to My Library",d.classList.add(M?"clicked":"default"),d.addEventListener("click",()=>{M=b.some(p=>p.id===l.id),M?(b=b.filter(p=>p.id!==l.id),d.textContent="Add to My Library",d.classList.remove("clicked","hovered"),d.classList.add("hovered"),document.getElementById("overlay").classList.add("hidden"),document.getElementById("notification").classList.add("hidden")):(b.push({id:l.id,title:l.title}),d.textContent="Remove from My Library",d.classList.remove("default","hovered"),d.classList.add("clicked"),document.addEventListener("DOMContentLoaded",function(){const p=document.getElementById("overlay"),E=document.getElementById("notification");p.classList.remove("hidden"),E.classList.remove("hidden"),setTimeout(()=>{p.classList.add("hidden"),E.classList.add("hidden")},1e3)})),localStorage.setItem(_,JSON.stringify(b))}),d.addEventListener("mouseenter",()=>{d.textContent==="Add to My Library"&&(d.classList.remove("default","clicked"),d.classList.add("hovered"))}),d.addEventListener("mouseleave",()=>{d.textContent==="Add to My Library"&&(d.classList.remove("hovered","clicked"),d.classList.add("default"))}),d.addEventListener("focus",()=>{d.classList.add("hovered")}),document.querySelector(".upcoming-movie-card").classList.remove("hidden"),document.querySelector(".btn-upcoming").classList.remove("hidden-button")}).catch(L=>console.error("Film verisi alınamadı:",L))}).catch(u=>console.error("Tür verisi alınamadı:",u))});const O=async()=>{const e=document.getElementById("footer");if(e)try{e.innerHTML=await fetch("./partials/footer.html").then(t=>t.text())}catch(t){console.error("Footer yükleme hatası:",t)}};window.addEventListener("load",O);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-details"),t=e.querySelector(".modal-details__close"),i=e.querySelector(".modal-details__library-btn");let a=null;const o={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};JSON.parse(localStorage.getItem("myLibrary"));function n(){e.classList.remove("active"),document.body.style.overflow="auto"}t.addEventListener("click",n),e.addEventListener("click",s=>s.target===e&&n()),document.addEventListener("keydown",s=>s.key==="Escape"&&n());function r(){return JSON.parse(localStorage.getItem("myLibrary"))||[]}function f(s){localStorage.setItem("myLibrary",JSON.stringify(s))}function m(s){return r().some(c=>c.id===s)}function g(s){const c=m(s);i.textContent=c?"Remove from library":"Add to library",i.dataset.action=c?"remove":"add"}function h(s){const c=r(),u=c.findIndex(y=>y.id===s.id);!s.genres&&s.genre_ids&&(s.genres=s.genre_ids.map(y=>({id:y,name:o[y]||"Unknown"}))),u===-1?c.push(s):c.splice(u,1),f(c),g(s.id)}i.addEventListener("click",async()=>{if(!a)return;const s=await v(a);s&&h(s)});async function v(s){const u=`https://api.themoviedb.org/3/movie/${s}?api_key=f1a0a8dd870a150fcd20cd47eff55f54&language=en-US`;try{const y=await fetch(u);return y.ok?await y.json():null}catch(y){return console.error("Film verisi alınamadı:",y),null}}async function w(s){const c=await v(s);c&&(a=c.id,e.querySelector(".modal-details__image").src=`https://image.tmdb.org/t/p/w500${c.poster_path}`,e.querySelector(".modal-details__image").alt=c.title,e.querySelector(".modal-details__title").textContent=c.title,e.querySelector(".modal-details__vote").textContent=c.vote_average.toFixed(1),e.querySelector(".modal-details__votes").textContent=c.vote_count,e.querySelector(".modal-details__popularity").textContent=c.popularity.toFixed(1),e.querySelector(".modal-details__genre").textContent=c.genres.map(u=>u.name).join(", "),e.querySelector(".modal-details__about-text").textContent=c.overview,g(c.id),e.classList.add("active"),document.body.style.overflow="hidden")}window.movieModal={show:w,close:n}});const $="f1a0a8dd870a150fcd20cd47eff55f54",N="https://api.themoviedb.org/3";async function D(e,t,i={}){const a=new URL(e+t);a.searchParams.append("api_key",$),a.searchParams.append("language","en-US"),Object.entries(i).forEach(([o,n])=>{a.searchParams.append(o,n)});try{const o=await fetch(a);if(!o.ok)throw new Error(`API error: ${o.status}`);return await o.json()}catch(o){return console.error("fetchMovies error:",o),{results:[]}}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero"),t=document.querySelector(".modal-trailer"),i=t.querySelector(".modal-trailer__close"),a=document.querySelector(".hero-button-watchTrailer"),o=t.querySelector(".modal-trailer__video");function n(){const m=o.src;o.src=m}function r(){t.classList.remove("active"),document.body.style.overflow="auto",n()}function f(){t.classList.add("active"),document.body.style.overflow="hidden";const m=e.dataset.movieid;D(N,`/movie/${m}/videos`).then(g=>{const h=g.results.find(v=>v.official===!0&&v.site==="YouTube"&&v.type==="Trailer");if(h){const v=`https://www.youtube.com/embed/${h.key}`;o.src=v}else console.log("No official YouTube trailer found.")})}a&&a.addEventListener("click",m=>{m.preventDefault(),f()}),i&&i.addEventListener("click",m=>{m.preventDefault(),r()}),t&&t.addEventListener("click",m=>{m.target===t&&r()}),document.addEventListener("keydown",m=>{m.key==="Escape"&&t.classList.contains("active")&&r()}),window.trailerModal={open:f,close:r}});B();
//# sourceMappingURL=main-QH1Iz4Qq.js.map
