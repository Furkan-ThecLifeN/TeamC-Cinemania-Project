(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const k=document.getElementById("film-list");let A=1;document.querySelector(".load-btn");const $="0f552bbb3a7946c71382d336324ac39a",x="",C=document.getElementById("empty-message"),B={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};document.addEventListener("DOMContentLoaded",()=>{const e=JSON.parse(localStorage.getItem("library"))||[];e.length===0?N():E(e)});async function q(){try{const t=await(await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${$}&page=${A}`)).json();E(t.results)}catch(e){console.error("Film verileri alınamadı:",e)}}function E(e){k.innerHTML="",C.innerHTML="",e.forEach(t=>{const r=document.createElement("li"),a=document.createElement("div");a.innerHTML=`
    <a href="https://image.tmdb.org/t/p/original/${t.poster_path} class="lightbox"><img class="movie-image" alt="${t.original_title}" src="https://image.tmdb.org/t/p/w500/${t.poster_path}"/></a>
      <h3>${t.original_title}</h3>
      
      <p class="popularity" >Populrity ${t.popularity}</p>
      <p class="genre">${t.genre_ids.map(o=>B[o]).join(",")}|${t.release_date.split("-")[0]}</p>`,r.classList.add("movieCard"),a.classList.add("filmCard"),r.appendChild(a),k.appendChild(r)})}const O=document.querySelectorAll(".filmCard");O.addEventListener("click",()=>{});function N(){const e=`<p class="markup"><span>OOOPS..</span><span>We are very sorry!</span><span>You don’t have any movies at your library</span></p>
  <button type="button" class="searchBtn">Search Movie</button>`;C.innerHTML=e,document.querySelector(".searchBtn").addEventListener("click",()=>{q()})}const D=document.querySelector(".add-remote-btn");D.addEventListener("click",e=>{e.target.dataset.id.includes(x)?addToLibrary():J(idToRemove)});function J(e){const r=(JSON.parse(localStorage.getItem("library"))||[]).filter(a=>a.id!==e);localStorage.setItem("library",JSON.stringify(r)),E(r)}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-details"),t=e.querySelector(".modal-details__close"),r=e.querySelector(".modal-details__library-btn");let a=null;const o={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};JSON.parse(localStorage.getItem("myLibrary"));function n(){e.classList.remove("active"),document.body.style.overflow="auto"}t.addEventListener("click",n),e.addEventListener("click",i=>i.target===e&&n()),document.addEventListener("keydown",i=>i.key==="Escape"&&n());function c(){return JSON.parse(localStorage.getItem("myLibrary"))||[]}function v(i){localStorage.setItem("myLibrary",JSON.stringify(i))}function m(i){return c().some(s=>s.id===i)}function g(i){const s=m(i);r.textContent=s?"Remove from library":"Add to library",r.dataset.action=s?"remove":"add"}function h(i){const s=c(),u=s.findIndex(y=>y.id===i.id);!i.genres&&i.genre_ids&&(i.genres=i.genre_ids.map(y=>({id:y,name:o[y]||"Unknown"}))),u===-1?s.push(i):s.splice(u,1),v(s),g(i.id)}r.addEventListener("click",async()=>{if(!a)return;const i=await p(a);i&&h(i)});async function p(i){const u=`https://api.themoviedb.org/3/movie/${i}?api_key=f1a0a8dd870a150fcd20cd47eff55f54&language=en-US`;try{const y=await fetch(u);return y.ok?await y.json():null}catch(y){return console.error("Film verisi alınamadı:",y),null}}async function _(i){const s=await p(i);s&&(a=s.id,e.querySelector(".modal-details__image").src=`https://image.tmdb.org/t/p/w500${s.poster_path}`,e.querySelector(".modal-details__image").alt=s.title,e.querySelector(".modal-details__title").textContent=s.title,e.querySelector(".modal-details__vote").textContent=s.vote_average.toFixed(1),e.querySelector(".modal-details__votes").textContent=s.vote_count,e.querySelector(".modal-details__popularity").textContent=s.popularity.toFixed(1),e.querySelector(".modal-details__genre").textContent=s.genres.map(u=>u.name).join(", "),e.querySelector(".modal-details__about-text").textContent=s.overview,g(s.id),e.classList.add("active"),document.body.style.overflow="hidden")}window.movieModal={show:_,close:n}});const F="f1a0a8dd870a150fcd20cd47eff55f54",j="https://api.themoviedb.org/3";async function P(e,t,r={}){const a=new URL(e+t);a.searchParams.append("api_key",F),a.searchParams.append("language","en-US"),Object.entries(r).forEach(([o,n])=>{a.searchParams.append(o,n)});try{const o=await fetch(a);if(!o.ok)throw new Error(`API error: ${o.status}`);return await o.json()}catch(o){return console.error("fetchMovies error:",o),{results:[]}}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero"),t=document.querySelector(".modal-trailer"),r=t.querySelector(".modal-trailer__close"),a=document.querySelector(".hero-button-watchTrailer"),o=t.querySelector(".modal-trailer__video");function n(){const m=o.src;o.src=m}function c(){t.classList.remove("active"),document.body.style.overflow="auto",n()}function v(){t.classList.add("active"),document.body.style.overflow="hidden";const m=e.dataset.movieid;P(j,`/movie/${m}/videos`).then(g=>{const h=g.results.find(p=>p.official===!0&&p.site==="YouTube"&&p.type==="Trailer");if(h){const p=`https://www.youtube.com/embed/${h.key}`;o.src=p}else console.log("No official YouTube trailer found.")})}a&&a.addEventListener("click",m=>{m.preventDefault(),v()}),r&&r.addEventListener("click",m=>{m.preventDefault(),c()}),t&&t.addEventListener("click",m=>{m.target===t&&c()}),document.addEventListener("keydown",m=>{m.key==="Escape"&&t.classList.contains("active")&&c()}),window.trailerModal={open:v,close:c}});async function R(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/week?language=tr-TR",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5ZWJmOWU4MzdkOWVmNGZlZDZiZTAzY2RlZTAyMTZiNSIsIm5iZiI6MTc0MjkxNzcyNC4zOTYsInN1YiI6IjY3ZTJkMDVjZDcwYzYxNTkwMzc1ZTgzNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.mGfFevHBMVfVG3Aha3atAbsBAX0sx3BUJdHGcEDZwAk"}})).json()).results}const H={28:"Aksiyon",12:"Macera",16:"Animasyon",35:"Komedi",80:"Suç",99:"Belgesel",18:"Dram",10751:"Aile",14:"Fantastik",36:"Tarih",27:"Korku",10402:"Müzik",9648:"Gizem",10749:"Romantik",878:"Bilim Kurgu",10770:"TV Filmi",53:"Gerilim",10752:"Savaş",37:"Western"};function Y(e){return e.map(t=>H[t]||"Bilinmeyen").join(", ")}function U(e){const t=Math.floor(e/2),r=e%2!==0?1:0,a=5-t-r;let o="";for(let n=0;n<t;n++)o+='<i class="fa-solid fa-star"></i>';r&&(o+='<i class="fa-solid fa-star-half"></i>');for(let n=0;n<a;n++)o+='<i class="fa-regular fa-star"></i>';return o}async function T(){const e=await R();if(!e||e.length===0)return;const t=document.querySelector(".weekly-movies-container");t.innerHTML="";const r=window.innerWidth;let a=3;r<=768&&(a=1),e.slice(0,a).forEach(n=>{const c=document.createElement("div");c.classList.add("weekly-trend-movie");const v=Y(n.genre_ids);c.innerHTML=`
      <div class="title">
        <h3>${n.title}</h3>
        <div class="movie-about">
          <div class="movie-title">
            <p>${v}</p>
            <span> | </span>
            <span>${n.release_date}</span>
          </div>

        </div>
        <div class="star-bar">${U(n.vote_average)}</div>
      </div>
    `,c.style.background=`linear-gradient(to bottom, #00000000 0%, #000000 100%), url('https://image.tmdb.org/t/p/w500${n.poster_path}')`,c.style.backgroundSize="cover",c.style.backgroundPosition="center",c.style.backgroundRepeat="no-repeat",t.appendChild(c)})}window.addEventListener("resize",T);T();const W=async()=>{const e=document.getElementById("footer");if(e)try{e.innerHTML=await fetch("./partials/footer.html").then(t=>t.text())}catch(t){console.error("Footer yükleme hatası:",t)}};window.addEventListener("load",W);async function z(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=04c35731a5ee918f014970082a0088b1")).json()).results}const Z="https://image.tmdb.org/t/p/original";async function K(){const e=document.getElementById("upcoming-section");try{const t=await z();if(!t||t.length===0){e.innerHTML="<p>Gösterilecek film bulunamadı.</p>";return}const r=t[0];e.innerHTML=`
      <div class="upcoming-movie-card">
        <div class="movie-poster" style="background-image: url('${Z}${r.backdrop_path}')"></div>
        <div class="movie-details">
          <h3 class="upcoming-movie-name">${r.title}</h3>
          <p class="movieabout">${r.overview}</p>
          <button class="btn-upcoming">Add to My Library</button>
        </div>
      </div>
    `}catch(t){console.error("Hata:",t),e.innerHTML="<p>Bir hata oluştu. Lütfen tekrar deneyin.</p>"}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("overlay"),t=document.getElementById("notification"),r=document.querySelector(".btn-upcoming"),a="myLibrary",o={id:123,title:"Example Movie"};let n=JSON.parse(localStorage.getItem(a))||[];r.addEventListener("click",function(){const u=n.some(y=>y.id===o.id);u?(e.style.display="none",t.classList.add("hidden")):(e.style.display="block",t.classList.remove("hidden"),setTimeout(()=>{e.style.display="none",t.classList.add("hidden")},2e3)),u?(n=n.filter(y=>y.id!==o.id),r.textContent="Add to My Library"):(n.push(o),r.textContent="Remove from My Library"),localStorage.setItem(a,JSON.stringify(n))});const c="04c35731a5ee918f014970082a0088b1",v="https://api.themoviedb.org/3",m=new Date,g=m.getFullYear(),h=String(m.getMonth()+1).padStart(2,"0"),p=`${g}-${h}-01`,_=new Date(g,h,0).getDate(),i=`${g}-${h}-${_}`,s={};fetch(`${v}/genre/movie/list?api_key=${c}`).then(u=>u.json()).then(u=>{u.genres.forEach(b=>{s[b.id]=b.name});const y=`${v}/discover/movie?api_key=${c}&primary_release_date.gte=${p}&primary_release_date.lte=${i}&sort_by=popularity.desc`;fetch(y).then(b=>b.json()).then(b=>{const S=b.results;if(!S||S.length===0){document.getElementById("no-movie-message").classList.remove("movie-hidden");return}let l=JSON.parse(localStorage.getItem("featuredUpcomingMovie"));l||(l=S[Math.floor(Math.random()*S.length)],localStorage.setItem("featuredUpcomingMovie",JSON.stringify(l))),console.log("Seçilen film:",l),document.querySelector(".movie-poster").style.backgroundImage=`url(https://image.tmdb.org/t/p/original${l.backdrop_path})`,document.querySelector(".upcoming-movie-name").textContent=l.title,document.querySelector(".info-date-value").textContent=l.release_date,document.querySelectorAll(".vote-box")[0].textContent=l.vote_average,document.querySelectorAll(".vote-box")[1].textContent=l.vote_count,document.querySelector(".info-popularity-value").textContent=Math.round(l.popularity),document.querySelector(".info-genre-value").textContent=l.genre_ids.map(f=>s[f]).join(", "),document.querySelector(".movieabout").textContent=l.overview;const d=document.querySelector(".btn-upcoming"),w="myLibrary";let L=JSON.parse(localStorage.getItem(w))||[],M=L.some(f=>f.id===l.id);d.textContent=M?"Remove from My Library":"Add to My Library",d.classList.add(M?"clicked":"default"),d.addEventListener("click",()=>{M=L.some(f=>f.id===l.id),M?(L=L.filter(f=>f.id!==l.id),d.textContent="Add to My Library",d.classList.remove("clicked","hovered"),d.classList.add("hovered"),document.getElementById("overlay").classList.add("hidden"),document.getElementById("notification").classList.add("hidden")):(L.push({id:l.id,title:l.title}),d.textContent="Remove from My Library",d.classList.remove("default","hovered"),d.classList.add("clicked"),document.addEventListener("DOMContentLoaded",function(){const f=document.getElementById("overlay"),I=document.getElementById("notification");f.classList.remove("hidden"),I.classList.remove("hidden"),setTimeout(()=>{f.classList.add("hidden"),I.classList.add("hidden")},1e3)})),localStorage.setItem(w,JSON.stringify(L))}),d.addEventListener("mouseenter",()=>{d.textContent==="Add to My Library"&&(d.classList.remove("default","clicked"),d.classList.add("hovered"))}),d.addEventListener("mouseleave",()=>{d.textContent==="Add to My Library"&&(d.classList.remove("hovered","clicked"),d.classList.add("default"))}),d.addEventListener("focus",()=>{d.classList.add("hovered")}),document.querySelector(".upcoming-movie-card").classList.remove("hidden"),document.querySelector(".btn-upcoming").classList.remove("hidden-button")}).catch(b=>console.error("Film verisi alınamadı:",b))}).catch(u=>console.error("Tür verisi alınamadı:",u))});K();
//# sourceMappingURL=main-CvLpB2l6.js.map
