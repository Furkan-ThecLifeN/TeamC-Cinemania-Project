(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-switcher");if(!e){console.error("theme-switcher elementi bulunamadı!");return}e.addEventListener("click",()=>{document.body.classList.toggle("dark-mode")});const o=document.querySelector(".btn"),i=document.querySelector(".navbar");o.addEventListener("click",()=>{i.classList.toggle("active")});const r=document.querySelectorAll(".nav-menu a");r.forEach(a=>{a.addEventListener("click",()=>{r.forEach(u=>u.classList.remove("active")),a.classList.add("active")})});const t=window.location.pathname.split("/").pop(),n=Array.from(r).find(a=>a.href.includes(t));n&&n.classList.add("active")});async function $(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/week?language=tr-TR",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5ZWJmOWU4MzdkOWVmNGZlZDZiZTAzY2RlZTAyMTZiNSIsIm5iZiI6MTc0MjkxNzcyNC4zOTYsInN1YiI6IjY3ZTJkMDVjZDcwYzYxNTkwMzc1ZTgzNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.mGfFevHBMVfVG3Aha3atAbsBAX0sx3BUJdHGcEDZwAk"}})).json()).results}const A={28:"Aksiyon",12:"Macera",16:"Animasyon",35:"Komedi",80:"Suç",99:"Belgesel",18:"Dram",10751:"Aile",14:"Fantastik",36:"Tarih",27:"Korku",10402:"Müzik",9648:"Gizem",10749:"Romantik",878:"Bilim Kurgu",10770:"TV Filmi",53:"Gerilim",10752:"Savaş",37:"Western"};function T(e){return e.map(o=>A[o]||"Bilinmeyen").join(", ")}function C(e){const o=Math.floor(e/2),i=e%2!==0?1:0,r=5-o-i;let t="";for(let n=0;n<o;n++)t+='<i class="fa-solid fa-star"></i>';i&&(t+='<i class="fa-solid fa-star-half"></i>');for(let n=0;n<r;n++)t+='<i class="fa-regular fa-star"></i>';return t}async function I(){const e=await $();if(!e||e.length===0)return;const o=document.querySelector(".weekly-movies-container");o.innerHTML="";const i=window.innerWidth;let r=3;i<=768&&(r=1),e.slice(0,r).forEach(n=>{const a=document.createElement("div");a.classList.add("weekly-trend-movie");const u=T(n.genre_ids);a.innerHTML=`
      <div class="title">
        <h3>${n.title}</h3>
        <div class="movie-about">
          <div class="movie-title">
            <p>${u}</p>
            <span> | </span>
            <span>${n.release_date}</span>
          </div>

        </div>
        <div class="star-bar">${C(n.vote_average)}</div>
      </div>
    `,a.style.background=`linear-gradient(to bottom, #00000000 0%, #000000 100%), url('https://image.tmdb.org/t/p/w500${n.poster_path}')`,a.style.backgroundSize="cover",a.style.backgroundPosition="center",a.style.backgroundRepeat="no-repeat",o.appendChild(a)})}window.addEventListener("resize",I);I();async function B(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=04c35731a5ee918f014970082a0088b1")).json()).results}const x="https://image.tmdb.org/t/p/original";async function q(){const e=document.getElementById("upcoming-section");try{const o=await B();if(!o||o.length===0){e.innerHTML="<p>Gösterilecek film bulunamadı.</p>";return}const i=o[0];e.innerHTML=`
      <div class="upcoming-movie-card">
        <div class="movie-poster" style="background-image: url('${x}${i.backdrop_path}')"></div>
        <div class="movie-details">
          <h3 class="upcoming-movie-name">${i.title}</h3>
          <p class="movieabout">${i.overview}</p>
          <button class="btn-upcoming">Add to My Library</button>
        </div>
      </div>
    `}catch(o){console.error("Hata:",o),e.innerHTML="<p>Bir hata oluştu. Lütfen tekrar deneyin.</p>"}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("overlay"),o=document.getElementById("notification"),i=document.querySelector(".btn-upcoming"),r="myLibrary",t={id:123,title:"Example Movie"};let n=JSON.parse(localStorage.getItem(r))||[];i.addEventListener("click",function(){const v=n.some(f=>f.id===t.id);v?(e.style.display="none",o.classList.add("hidden")):(e.style.display="block",o.classList.remove("hidden"),setTimeout(()=>{e.style.display="none",o.classList.add("hidden")},2e3)),v?(n=n.filter(f=>f.id!==t.id),i.textContent="Add to My Library"):(n.push(t),i.textContent="Remove from My Library"),localStorage.setItem(r,JSON.stringify(n))});const a="04c35731a5ee918f014970082a0088b1",u="https://api.themoviedb.org/3",d=new Date,h=d.getFullYear(),p=String(d.getMonth()+1).padStart(2,"0"),y=`${h}-${p}-01`,b=new Date(h,p,0).getDate(),s=`${h}-${p}-${b}`,c={};fetch(`${u}/genre/movie/list?api_key=${a}`).then(v=>v.json()).then(v=>{v.genres.forEach(L=>{c[L.id]=L.name});const f=`${u}/discover/movie?api_key=${a}&primary_release_date.gte=${y}&primary_release_date.lte=${s}&sort_by=popularity.desc`;fetch(f).then(L=>L.json()).then(L=>{const w=L.results;if(!w||w.length===0){document.getElementById("no-movie-message").classList.remove("movie-hidden");return}let m=JSON.parse(localStorage.getItem("featuredUpcomingMovie"));m||(m=w[Math.floor(Math.random()*w.length)],localStorage.setItem("featuredUpcomingMovie",JSON.stringify(m))),console.log("Seçilen film:",m),document.querySelector(".movie-poster").style.backgroundImage=`url(https://image.tmdb.org/t/p/original${m.backdrop_path})`,document.querySelector(".upcoming-movie-name").textContent=m.title,document.querySelector(".info-date-value").textContent=m.release_date,document.querySelectorAll(".vote-box")[0].textContent=m.vote_average,document.querySelectorAll(".vote-box")[1].textContent=m.vote_count,document.querySelector(".info-popularity-value").textContent=Math.round(m.popularity),document.querySelector(".info-genre-value").textContent=m.genre_ids.map(g=>c[g]).join(", "),document.querySelector(".movieabout").textContent=m.overview;const l=document.querySelector(".btn-upcoming"),E="myLibrary";let S=JSON.parse(localStorage.getItem(E))||[],M=S.some(g=>g.id===m.id);l.textContent=M?"Remove from My Library":"Add to My Library",l.classList.add(M?"clicked":"default"),l.addEventListener("click",()=>{M=S.some(g=>g.id===m.id),M?(S=S.filter(g=>g.id!==m.id),l.textContent="Add to My Library",l.classList.remove("clicked","hovered"),l.classList.add("hovered"),document.getElementById("overlay").classList.add("hidden"),document.getElementById("notification").classList.add("hidden")):(S.push({id:m.id,title:m.title}),l.textContent="Remove from My Library",l.classList.remove("default","hovered"),l.classList.add("clicked"),document.addEventListener("DOMContentLoaded",function(){const g=document.getElementById("overlay"),_=document.getElementById("notification");g.classList.remove("hidden"),_.classList.remove("hidden"),setTimeout(()=>{g.classList.add("hidden"),_.classList.add("hidden")},1e3)})),localStorage.setItem(E,JSON.stringify(S))}),l.addEventListener("mouseenter",()=>{l.textContent==="Add to My Library"&&(l.classList.remove("default","clicked"),l.classList.add("hovered"))}),l.addEventListener("mouseleave",()=>{l.textContent==="Add to My Library"&&(l.classList.remove("hovered","clicked"),l.classList.add("default"))}),l.addEventListener("focus",()=>{l.classList.add("hovered")}),document.querySelector(".upcoming-movie-card").classList.remove("hidden"),document.querySelector(".btn-upcoming").classList.remove("hidden-button")}).catch(L=>console.error("Film verisi alınamadı:",L))}).catch(v=>console.error("Tür verisi alınamadı:",v))});const O=async()=>{const e=document.getElementById("footer");if(e)try{e.innerHTML=await fetch("./partials/footer.html").then(o=>o.text())}catch(o){console.error("Footer yükleme hatası:",o)}};window.addEventListener("load",O);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-details"),o=e.querySelector(".modal-details__close"),i=e.querySelector(".modal-details__library-btn");let r=null;const t={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};JSON.parse(localStorage.getItem("myLibrary"));function n(){e.classList.remove("active"),document.body.style.overflow="auto"}o.addEventListener("click",n),e.addEventListener("click",s=>s.target===e&&n()),document.addEventListener("keydown",s=>s.key==="Escape"&&n());function a(){return JSON.parse(localStorage.getItem("myLibrary"))||[]}function u(s){localStorage.setItem("myLibrary",JSON.stringify(s))}function d(s){return a().some(c=>c.id===s)}function h(s){const c=d(s);i.textContent=c?"Remove from library":"Add to library",i.dataset.action=c?"remove":"add"}function p(s){const c=a(),v=c.findIndex(f=>f.id===s.id);!s.genres&&s.genre_ids&&(s.genres=s.genre_ids.map(f=>({id:f,name:t[f]||"Unknown"}))),v===-1?c.push(s):c.splice(v,1),u(c),h(s.id)}i.addEventListener("click",async()=>{if(!r)return;const s=await y(r);s&&p(s)});async function y(s){const v=`https://api.themoviedb.org/3/movie/${s}?api_key=f1a0a8dd870a150fcd20cd47eff55f54&language=en-US`;try{const f=await fetch(v);return f.ok?await f.json():null}catch(f){return console.error("Film verisi alınamadı:",f),null}}async function b(s){const c=await y(s);c&&(r=c.id,e.querySelector(".modal-details__image").src=`https://image.tmdb.org/t/p/w500${c.poster_path}`,e.querySelector(".modal-details__image").alt=c.title,e.querySelector(".modal-details__title").textContent=c.title,e.querySelector(".modal-details__vote").textContent=c.vote_average.toFixed(1),e.querySelector(".modal-details__votes").textContent=c.vote_count,e.querySelector(".modal-details__popularity").textContent=c.popularity.toFixed(1),e.querySelector(".modal-details__genre").textContent=c.genres.map(v=>v.name).join(", "),e.querySelector(".modal-details__about-text").textContent=c.overview,h(c.id),e.classList.add("active"),document.body.style.overflow="hidden")}window.movieModal={show:b,close:n}});const D="f1a0a8dd870a150fcd20cd47eff55f54",N="https://api.themoviedb.org/3";async function J(e,o,i={}){const r=new URL(e+o);r.searchParams.append("api_key",D),r.searchParams.append("language","en-US"),Object.entries(i).forEach(([t,n])=>{r.searchParams.append(t,n)});try{const t=await fetch(r);if(!t.ok)throw new Error(`API error: ${t.status}`);return await t.json()}catch(t){return console.error("fetchMovies error:",t),{results:[]}}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero"),o=document.querySelector(".modal-trailer"),i=o.querySelector(".modal-trailer__close"),r=document.querySelector(".hero-button-watchTrailer"),t=o.querySelector(".modal-trailer__video");function n(){const d=t.src;t.src=d}function a(){o.classList.remove("active"),document.body.style.overflow="auto",n()}function u(){o.classList.add("active"),document.body.style.overflow="hidden";const d=e.dataset.movieid;J(N,`/movie/${d}/videos`).then(h=>{const p=h.results.find(y=>y.official===!0&&y.site==="YouTube"&&y.type==="Trailer");if(p){const y=`https://www.youtube.com/embed/${p.key}`;t.src=y}else console.log("No official YouTube trailer found.")})}r&&r.addEventListener("click",d=>{d.preventDefault(),u()}),i&&i.addEventListener("click",d=>{d.preventDefault(),a()}),o&&o.addEventListener("click",d=>{d.target===o&&a()}),document.addEventListener("keydown",d=>{d.key==="Escape"&&o.classList.contains("active")&&a()}),window.trailerModal={open:u,close:a}});const j="0ce25b1b3df50695af6eae55a386f147",F="https://api.themoviedb.org/3",H="https://image.tmdb.org/t/p/original";async function P(){return(await(await fetch(`${F}/trending/movie/day?api_key=${j}`)).json()).results}async function R(){var i;const e=document.getElementById("hero-section");try{let n=function(a){const u=a/2,d=Math.floor(u),h=u%1>=.25&&u%1<=.75,p=5-d-(h?1:0);let y="";for(let b=0;b<d;b++)y+='<span class="star full">★</span>';h&&(y+='<span class="star half">★</span>');for(let b=0;b<p;b++)y+='<span class="star empty">☆</span>';return y};var o=n;const r=await P();if(!r||r.length===0){k(e);return}const t=r[Math.floor(Math.random()*r.length)];e.style.backgroundImage=`url('${H}${t.backdrop_path}')`,e.innerHTML=`
      <div class="hero-content">
        <h1 class="hero-title">${t.title}</h1>
        <p class="hero-rating">${n(t.vote_average)}</p>
        <p class="hero-overview">${((i=t.overview)==null?void 0:i.slice(0,200))||"No description available."}</p>
        <div class="hero-buttons">
          <button class="hero-button" data-id="${t.id}" id="more-details-btn">More details</button>
          <button class="hero-button" data-id="${t.id}" id="watch-trailer-btn">Watch trailer</button>
        </div>
      </div>
    `,document.getElementById("more-details-btn").addEventListener("click",()=>{const a=new CustomEvent("openDetailsModal",{detail:{id:t.id}});window.dispatchEvent(a)}),document.getElementById("watch-trailer-btn").addEventListener("click",()=>{const a=new CustomEvent("openTrailerModal",{detail:{id:t.id}});window.dispatchEvent(a)})}catch(r){console.error("Hata oluştu:",r),k(e)}}function k(e){e.style.backgroundImage="url('../img/heroDefault.png')",e.innerHTML=`
    <div class="hero-content">
      <h1 class="hero-title">Welcome to Cinemania</h1>
      <p class="hero-overview">Discover the hottest movies trending today.</p>
      <div class="hero-buttons">
        <a href="/catalog.html" class="hero-button">Get Started</a>
      </div>
    </div>
  `}R();q();
//# sourceMappingURL=main-49r3gLZt.js.map
