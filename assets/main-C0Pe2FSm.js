(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("theme-switcher");if(!t){console.error("theme-switcher elementi bulunamadı!");return}t.addEventListener("click",()=>{document.body.classList.toggle("dark-mode")});const n=document.querySelector(".btn"),c=document.querySelector(".navbar");n.addEventListener("click",()=>{c.classList.toggle("active")});const r=document.querySelectorAll(".nav-menu a");r.forEach(a=>{a.addEventListener("click",()=>{r.forEach(u=>u.classList.remove("active")),a.classList.add("active")})});const e=window.location.pathname.split("/").pop(),o=Array.from(r).find(a=>a.href.includes(e));o&&o.classList.add("active")});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".modal-details"),n=t.querySelector(".modal-details__close"),c=t.querySelector(".modal-details__library-btn");let r=null;const e={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};JSON.parse(localStorage.getItem("myLibrary"));function o(){t.classList.remove("active"),document.body.style.overflow="auto"}n.addEventListener("click",o),t.addEventListener("click",i=>i.target===t&&o()),document.addEventListener("keydown",i=>i.key==="Escape"&&o());function a(){return JSON.parse(localStorage.getItem("myLibrary"))||[]}function u(i){localStorage.setItem("myLibrary",JSON.stringify(i))}function l(i){return a().some(s=>s.id===i)}function f(i){const s=l(i);c.textContent=s?"Remove from library":"Add to library",c.dataset.action=s?"remove":"add"}function h(i){const s=a(),v=s.findIndex(m=>m.id===i.id);!i.genres&&i.genre_ids&&(i.genres=i.genre_ids.map(m=>({id:m,name:e[m]||"Unknown"}))),v===-1?s.push(i):s.splice(v,1),u(s),f(i.id)}c.addEventListener("click",async()=>{if(!r)return;const i=await d(r);i&&h(i)});async function d(i){const v=`https://api.themoviedb.org/3/movie/${i}?api_key=f1a0a8dd870a150fcd20cd47eff55f54&language=en-US`;try{const m=await fetch(v);return m.ok?await m.json():null}catch(m){return console.error("Film verisi alınamadı:",m),null}}async function y(i){const s=await d(i);s&&(r=s.id,t.querySelector(".modal-details__image").src=`https://image.tmdb.org/t/p/w500${s.poster_path}`,t.querySelector(".modal-details__image").alt=s.title,t.querySelector(".modal-details__title").textContent=s.title,t.querySelector(".modal-details__vote").textContent=s.vote_average.toFixed(1),t.querySelector(".modal-details__votes").textContent=s.vote_count,t.querySelector(".modal-details__popularity").textContent=s.popularity.toFixed(1),t.querySelector(".modal-details__genre").textContent=s.genres.map(v=>v.name).join(", "),t.querySelector(".modal-details__about-text").textContent=s.overview,f(s.id),t.classList.add("active"),document.body.style.overflow="hidden")}window.movieModal={show:y,close:o}});const b="f1a0a8dd870a150fcd20cd47eff55f54",w="https://api.themoviedb.org/3";async function L(t,n,c={}){const r=new URL(t+n);r.searchParams.append("api_key",b),r.searchParams.append("language","en-US"),Object.entries(c).forEach(([e,o])=>{r.searchParams.append(e,o)});try{const e=await fetch(r);if(!e.ok)throw new Error(`API error: ${e.status}`);return await e.json()}catch(e){return console.error("fetchMovies error:",e),{results:[]}}}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".hero"),n=document.querySelector(".modal-trailer"),c=n.querySelector(".modal-trailer__close"),r=document.querySelector(".hero-button-watchTrailer"),e=n.querySelector(".modal-trailer__video");function o(){const l=e.src;e.src=l}function a(){n.classList.remove("active"),document.body.style.overflow="auto",o()}function u(){n.classList.add("active"),document.body.style.overflow="hidden";const l=t.dataset.movieid;L(w,`/movie/${l}/videos`).then(f=>{const h=f.results.find(d=>d.official===!0&&d.site==="YouTube"&&d.type==="Trailer");if(h){const d=`https://www.youtube.com/embed/${h.key}`;e.src=d}else console.log("No official YouTube trailer found.")})}r&&r.addEventListener("click",l=>{l.preventDefault(),u()}),c&&c.addEventListener("click",l=>{l.preventDefault(),a()}),n&&n.addEventListener("click",l=>{l.target===n&&a()}),document.addEventListener("keydown",l=>{l.key==="Escape"&&n.classList.contains("active")&&a()}),window.trailerModal={open:u,close:a}});async function S(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/week?language=tr-TR",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5ZWJmOWU4MzdkOWVmNGZlZDZiZTAzY2RlZTAyMTZiNSIsIm5iZiI6MTc0MjkxNzcyNC4zOTYsInN1YiI6IjY3ZTJkMDVjZDcwYzYxNTkwMzc1ZTgzNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.mGfFevHBMVfVG3Aha3atAbsBAX0sx3BUJdHGcEDZwAk"}})).json()).results}const E={28:"Aksiyon",12:"Macera",16:"Animasyon",35:"Komedi",80:"Suç",99:"Belgesel",18:"Dram",10751:"Aile",14:"Fantastik",36:"Tarih",27:"Korku",10402:"Müzik",9648:"Gizem",10749:"Romantik",878:"Bilim Kurgu",10770:"TV Filmi",53:"Gerilim",10752:"Savaş",37:"Western"};function M(t){return t.map(n=>E[n]||"Bilinmeyen").join(", ")}function _(t){const n=Math.floor(t/2),c=t%2!==0?1:0,r=5-n-c;let e="";for(let o=0;o<n;o++)e+='<i class="fa-solid fa-star"></i>';c&&(e+='<i class="fa-solid fa-star-half"></i>');for(let o=0;o<r;o++)e+='<i class="fa-regular fa-star"></i>';return e}async function g(){const t=await S();if(!t||t.length===0)return;const n=document.querySelector(".weekly-movies-container");n.innerHTML="";const c=window.innerWidth;let r=3;c<=768&&(r=1),t.slice(0,r).forEach(o=>{const a=document.createElement("div");a.classList.add("weekly-trend-movie");const u=M(o.genre_ids);a.innerHTML=`
      <div class="title">
        <h3>${o.title}</h3>
        <div class="movie-about">
          <div class="movie-title">
            <p>${u}</p>
            <span> | </span>
            <span>${o.release_date}</span>
          </div>

        </div>
        <div class="star-bar">${_(o.vote_average)}</div>
      </div>
    `,a.style.background=`linear-gradient(to bottom, #00000000 0%, #000000 100%), url('https://image.tmdb.org/t/p/w500${o.poster_path}')`,a.style.backgroundSize="cover",a.style.backgroundPosition="center",a.style.backgroundRepeat="no-repeat",n.appendChild(a)})}window.addEventListener("resize",g);g();const k=async()=>{const t=document.getElementById("footer");if(t)try{t.innerHTML=await fetch("./partials/footer.html").then(n=>n.text())}catch(n){console.error("Footer yükleme hatası:",n)}};window.addEventListener("load",k);const I="0ce25b1b3df50695af6eae55a386f147",T="https://api.themoviedb.org/3",A="https://image.tmdb.org/t/p/original";async function B(){return(await(await fetch(`${T}/trending/movie/day?api_key=${I}`)).json()).results}async function $(){var c;const t=document.getElementById("hero-section");try{let o=function(a){const u=a/2,l=Math.floor(u),f=u%1>=.25&&u%1<=.75,h=5-l-(f?1:0);let d="";for(let y=0;y<l;y++)d+='<span class="star full">★</span>';f&&(d+='<span class="star half">★</span>');for(let y=0;y<h;y++)d+='<span class="star empty">☆</span>';return d};var n=o;const r=await B();if(!r||r.length===0){p(t);return}const e=r[Math.floor(Math.random()*r.length)];t.style.backgroundImage=`url('${A}${e.backdrop_path}')`,t.innerHTML=`
      <div class="hero-content">
        <h1 class="hero-title">${e.title}</h1>
        <p class="hero-rating">${o(e.vote_average)}</p>
        <p class="hero-overview">${((c=e.overview)==null?void 0:c.slice(0,200))||"No description available."}</p>
        <div class="hero-buttons">
          <button class="hero-button" data-id="${e.id}" id="more-details-btn">More details</button>
          <button class="hero-button" data-id="${e.id}" id="watch-trailer-btn">Watch trailer</button>
        </div>
      </div>
    `,document.getElementById("more-details-btn").addEventListener("click",()=>{const a=new CustomEvent("openDetailsModal",{detail:{id:e.id}});window.dispatchEvent(a)}),document.getElementById("watch-trailer-btn").addEventListener("click",()=>{const a=new CustomEvent("openTrailerModal",{detail:{id:e.id}});window.dispatchEvent(a)})}catch(r){console.error("Hata oluştu:",r),p(t)}}function p(t){t.style.backgroundImage="url('../img/heroDefault.png')",t.innerHTML=`
    <div class="hero-content">
      <h1 class="hero-title">Welcome to Cinemania</h1>
      <p class="hero-overview">Discover the hottest movies trending today.</p>
      <div class="hero-buttons">
        <a href="/catalog.html" class="hero-button">Get Started</a>
      </div>
    </div>
  `}$();
//# sourceMappingURL=main-C0Pe2FSm.js.map
