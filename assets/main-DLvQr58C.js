(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const O="https://image.tmdb.org/t/p/original",q="0f552bbb3a7946c71382d336324ac39a";async function x(){try{return(await(await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${q}`)).json()).results}catch(e){return console.error("Error fetching trending movies:",e),[]}}async function $(){var t;const e=document.getElementById("hero-section");if(e)try{const o=await x();if(!o||o.length===0){k(e);return}const n=o[Math.floor(Math.random()*o.length)];e.style.backgroundImage=`url('${O}${n.backdrop_path}')`,e.innerHTML=`
      <div class="hero-content">
        <h1 class="hero-title">${n.title}</h1>
        <p class="hero-rating">${N(n.vote_average)}</p>
        <p class="hero-overview">${((t=n.overview)==null?void 0:t.slice(0,200))||"No description available."}</p>
        <div class="hero-buttons">
          <button class="hero-button" data-id="${n.id}" id="more-details-btn">More details</button>
          <button class="hero-button" data-id="${n.id}" id="watch-trailer-btn">Watch trailer</button>
        </div>
      </div>
    `,document.getElementById("more-details-btn").addEventListener("click",()=>{const r=new CustomEvent("openDetailsModal",{detail:{id:n.id}});window.dispatchEvent(r)}),document.getElementById("watch-trailer-btn").addEventListener("click",()=>{const r=new CustomEvent("openTrailerModal",{detail:{id:n.id}});window.dispatchEvent(r)})}catch(o){console.error("Error occurred:",o),k(e)}}function N(e){const t=e/2,o=Math.floor(t),n=t%1>=.25&&t%1<=.75,r=5-o-(n?1:0);let a="";for(let i=0;i<o;i++)a+='<span class="star full">★</span>';n&&(a+='<span class="star half">★</span>');for(let i=0;i<r;i++)a+='<span class="star empty">☆</span>';return a}function k(e){e.style.backgroundImage="url('../img/heroDefault.png')",e.innerHTML=`
    <div class="hero-content">
      <h1 class="hero-title">Welcome to Cinemania</h1>
      <p class="hero-overview">Discover the hottest movies trending today.</p>
      <div class="hero-buttons">
        <a href="/catalog.html" class="hero-button">Get Started</a>
      </div>
    </div>
  `}async function D(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=04c35731a5ee918f014970082a0088b1")).json()).results}const J="https://image.tmdb.org/t/p/original";async function H(){const e=document.getElementById("upcoming-section");try{const t=await D();if(!t||t.length===0){e.innerHTML="<p>Gösterilecek film bulunamadı.</p>";return}const o=t[0];e.innerHTML=`
      <div class="upcoming-movie-card">
        <div class="movie-poster" style="background-image: url('${J}${o.backdrop_path}')"></div>
        <div class="movie-details">
          <h3 class="upcoming-movie-name">${o.title}</h3>
          <p class="movieabout">${o.overview}</p>
          <button class="btn-upcoming">Add to My Library</button>
        </div>
      </div>
    `}catch(t){console.error("Hata:",t),e.innerHTML="<p>Bir hata oluştu. Lütfen tekrar deneyin.</p>"}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("overlay"),t=document.getElementById("notification"),o=document.querySelector(".btn-upcoming"),n="myLibrary",r={id:123,title:"Example Movie"};let a=JSON.parse(localStorage.getItem(n))||[];o.addEventListener("click",function(){const u=a.some(y=>y.id===r.id);u?(e.style.display="none",t.classList.add("hidden")):(e.style.display="block",t.classList.remove("hidden"),setTimeout(()=>{e.style.display="none",t.classList.add("hidden")},2e3)),u?(a=a.filter(y=>y.id!==r.id),o.textContent="Add to My Library"):(a.push(r),o.textContent="Remove from My Library"),localStorage.setItem(n,JSON.stringify(a))});const i="04c35731a5ee918f014970082a0088b1",p="https://api.themoviedb.org/3",m=new Date,g=m.getFullYear(),h=String(m.getMonth()+1).padStart(2,"0"),f=`${g}-${h}-01`,M=new Date(g,h,0).getDate(),s=`${g}-${h}-${M}`,c={};fetch(`${p}/genre/movie/list?api_key=${i}`).then(u=>u.json()).then(u=>{u.genres.forEach(b=>{c[b.id]=b.name});const y=`${p}/discover/movie?api_key=${i}&primary_release_date.gte=${f}&primary_release_date.lte=${s}&sort_by=popularity.desc`;fetch(y).then(b=>b.json()).then(b=>{const S=b.results;if(!S||S.length===0){document.getElementById("no-movie-message").classList.remove("movie-hidden");return}let l=JSON.parse(localStorage.getItem("featuredUpcomingMovie"));l||(l=S[Math.floor(Math.random()*S.length)],localStorage.setItem("featuredUpcomingMovie",JSON.stringify(l))),console.log("Seçilen film:",l),document.querySelector(".movie-poster").style.backgroundImage=`url(https://image.tmdb.org/t/p/original${l.backdrop_path})`,document.querySelector(".upcoming-movie-name").textContent=l.title,document.querySelector(".info-date-value").textContent=l.release_date,document.querySelectorAll(".vote-box")[0].textContent=l.vote_average,document.querySelectorAll(".vote-box")[1].textContent=l.vote_count,document.querySelector(".info-popularity-value").textContent=Math.round(l.popularity),document.querySelector(".info-genre-value").textContent=l.genre_ids.map(v=>c[v]).join(", "),document.querySelector(".movieabout").textContent=l.overview;const d=document.querySelector(".btn-upcoming"),_="myLibrary";let L=JSON.parse(localStorage.getItem(_))||[],E=L.some(v=>v.id===l.id);d.textContent=E?"Remove from My Library":"Add to My Library",d.classList.add(E?"clicked":"default"),d.addEventListener("click",()=>{E=L.some(v=>v.id===l.id),E?(L=L.filter(v=>v.id!==l.id),d.textContent="Add to My Library",d.classList.remove("clicked","hovered"),d.classList.add("hovered"),document.getElementById("overlay").classList.add("hidden"),document.getElementById("notification").classList.add("hidden")):(L.push({id:l.id,title:l.title}),d.textContent="Remove from My Library",d.classList.remove("default","hovered"),d.classList.add("clicked"),document.addEventListener("DOMContentLoaded",function(){const v=document.getElementById("overlay"),I=document.getElementById("notification");v.classList.remove("hidden"),I.classList.remove("hidden"),setTimeout(()=>{v.classList.add("hidden"),I.classList.add("hidden")},1e3)})),localStorage.setItem(_,JSON.stringify(L))}),d.addEventListener("mouseenter",()=>{d.textContent==="Add to My Library"&&(d.classList.remove("default","clicked"),d.classList.add("hovered"))}),d.addEventListener("mouseleave",()=>{d.textContent==="Add to My Library"&&(d.classList.remove("hovered","clicked"),d.classList.add("default"))}),d.addEventListener("focus",()=>{d.classList.add("hovered")}),document.querySelector(".upcoming-movie-card").classList.remove("hidden"),document.querySelector(".btn-upcoming").classList.remove("hidden-button")}).catch(b=>console.error("Film verisi alınamadı:",b))}).catch(u=>console.error("Tür verisi alınamadı:",u))});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-switcher");if(!e){console.error("theme-switcher elementi bulunamadı!");return}e.addEventListener("click",()=>{document.body.classList.toggle("dark-mode")});const t=document.querySelector(".btn"),o=document.querySelector(".navbar");t.addEventListener("click",()=>{o.classList.toggle("active")});const n=document.querySelectorAll(".nav-menu a");n.forEach(i=>{i.addEventListener("click",()=>{n.forEach(p=>p.classList.remove("active")),i.classList.add("active")})});const r=window.location.pathname.split("/").pop(),a=Array.from(n).find(i=>i.href.includes(r));a&&a.classList.add("active")});async function P(){return(await(await fetch("https://api.themoviedb.org/3/trending/movie/week?language=tr-TR",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5ZWJmOWU4MzdkOWVmNGZlZDZiZTAzY2RlZTAyMTZiNSIsIm5iZiI6MTc0MjkxNzcyNC4zOTYsInN1YiI6IjY3ZTJkMDVjZDcwYzYxNTkwMzc1ZTgzNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.mGfFevHBMVfVG3Aha3atAbsBAX0sx3BUJdHGcEDZwAk"}})).json()).results}const j={28:"Aksiyon",12:"Macera",16:"Animasyon",35:"Komedi",80:"Suç",99:"Belgesel",18:"Dram",10751:"Aile",14:"Fantastik",36:"Tarih",27:"Korku",10402:"Müzik",9648:"Gizem",10749:"Romantik",878:"Bilim Kurgu",10770:"TV Filmi",53:"Gerilim",10752:"Savaş",37:"Western"};function F(e){return e.map(t=>j[t]||"Bilinmeyen").join(", ")}function R(e){const t=Math.floor(e/2),o=e%2!==0?1:0,n=5-t-o;let r="";for(let a=0;a<t;a++)r+='<i class="fa-solid fa-star"></i>';o&&(r+='<i class="fa-solid fa-star-half"></i>');for(let a=0;a<n;a++)r+='<i class="fa-regular fa-star"></i>';return r}async function B(){const e=await P();if(!e||e.length===0)return;const t=document.querySelector(".weekly-movies-container");t.innerHTML="";const o=window.innerWidth;let n=3;o<=768&&(n=1),e.slice(0,n).forEach(a=>{const i=document.createElement("div");i.classList.add("weekly-trend-movie");const p=F(a.genre_ids);i.innerHTML=`
      <div class="title">
        <h3>${a.title}</h3>
        <div class="movie-about">
          <div class="movie-title">
            <p>${p}</p>
            <span> | </span>
            <span>${a.release_date}</span>
          </div>

        </div>
        <div class="star-bar">${R(a.vote_average)}</div>
      </div>
    `,i.style.background=`linear-gradient(to bottom, #00000000 0%, #000000 100%), url('https://image.tmdb.org/t/p/w500${a.poster_path}')`,i.style.backgroundSize="cover",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",t.appendChild(i)})}window.addEventListener("resize",B);B();const Y=async()=>{const e=document.getElementById("footer");if(e)try{e.innerHTML=await fetch("./partials/footer.html").then(t=>t.text())}catch(t){console.error("Footer yükleme hatası:",t)}};window.addEventListener("load",Y);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-details"),t=e.querySelector(".modal-details__close"),o=e.querySelector(".modal-details__library-btn");let n=null;const r={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};JSON.parse(localStorage.getItem("myLibrary"));function a(){e.classList.remove("active"),document.body.style.overflow="auto"}t.addEventListener("click",a),e.addEventListener("click",s=>s.target===e&&a()),document.addEventListener("keydown",s=>s.key==="Escape"&&a());function i(){return JSON.parse(localStorage.getItem("myLibrary"))||[]}function p(s){localStorage.setItem("myLibrary",JSON.stringify(s))}function m(s){return i().some(c=>c.id===s)}function g(s){const c=m(s);o.textContent=c?"Remove from library":"Add to library",o.dataset.action=c?"remove":"add"}function h(s){const c=i(),u=c.findIndex(y=>y.id===s.id);!s.genres&&s.genre_ids&&(s.genres=s.genre_ids.map(y=>({id:y,name:r[y]||"Unknown"}))),u===-1?c.push(s):c.splice(u,1),p(c),g(s.id)}o.addEventListener("click",async()=>{if(!n)return;const s=await f(n);s&&h(s)});async function f(s){const u=`https://api.themoviedb.org/3/movie/${s}?api_key=f1a0a8dd870a150fcd20cd47eff55f54&language=en-US`;try{const y=await fetch(u);return y.ok?await y.json():null}catch(y){return console.error("Film verisi alınamadı:",y),null}}async function M(s){const c=await f(s);c&&(n=c.id,e.querySelector(".modal-details__image").src=`https://image.tmdb.org/t/p/w500${c.poster_path}`,e.querySelector(".modal-details__image").alt=c.title,e.querySelector(".modal-details__title").textContent=c.title,e.querySelector(".modal-details__vote").textContent=c.vote_average.toFixed(1),e.querySelector(".modal-details__votes").textContent=c.vote_count,e.querySelector(".modal-details__popularity").textContent=c.popularity.toFixed(1),e.querySelector(".modal-details__genre").textContent=c.genres.map(u=>u.name).join(", "),e.querySelector(".modal-details__about-text").textContent=c.overview,g(c.id),e.classList.add("active"),document.body.style.overflow="hidden")}window.movieModal={show:M,close:a}});const U="f1a0a8dd870a150fcd20cd47eff55f54",z="https://api.themoviedb.org/3";async function W(e,t,o={}){const n=new URL(e+t);n.searchParams.append("api_key",U),n.searchParams.append("language","en-US"),Object.entries(o).forEach(([r,a])=>{n.searchParams.append(r,a)});try{const r=await fetch(n);if(!r.ok)throw new Error(`API error: ${r.status}`);return await r.json()}catch(r){return console.error("fetchMovies error:",r),{results:[]}}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero"),t=document.querySelector(".modal-trailer"),o=t.querySelector(".modal-trailer__close"),n=document.querySelector(".hero-button-watchTrailer"),r=t.querySelector(".modal-trailer__video");function a(){const m=r.src;r.src=m}function i(){t.classList.remove("active"),document.body.style.overflow="auto",a()}function p(){t.classList.add("active"),document.body.style.overflow="hidden";const m=e.dataset.movieid;W(z,`/movie/${m}/videos`).then(g=>{const h=g.results.find(f=>f.official===!0&&f.site==="YouTube"&&f.type==="Trailer");if(h){const f=`https://www.youtube.com/embed/${h.key}`;r.src=f}else console.log("No official YouTube trailer found.")})}n&&n.addEventListener("click",m=>{m.preventDefault(),p()}),o&&o.addEventListener("click",m=>{m.preventDefault(),i()}),t&&t.addEventListener("click",m=>{m.target===t&&i()}),document.addEventListener("keydown",m=>{m.key==="Escape"&&t.classList.contains("active")&&i()}),window.trailerModal={open:p,close:i}});const G="0f552bbb3a7946c71382d336324ac39a",K={28:"Action",12:"Adventure"};function Z(){document.getElementById("film-list"),document.getElementById("empty-message");const e=JSON.parse(localStorage.getItem("library"))||[];e.length===0?C():w(e),V()}function V(){const e=document.querySelector(".load-btn");e&&e.addEventListener("click",()=>{page++,A()}),document.addEventListener("click",t=>{if(t.target.classList.contains("add-remote-btn")){const o=parseInt(t.target.dataset.id);T(o)&&Q(o)}})}async function A(){try{const t=await(await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${G}&page=${page}`)).json();w(t.results)}catch(e){console.error("Could not fetch movie data:",e)}}function w(e){const t=document.getElementById("film-list"),o=document.getElementById("empty-message");t&&(t.innerHTML="",o&&(o.innerHTML=""),e.forEach(n=>{const r=document.createElement("li"),a=document.createElement("div");a.innerHTML=`
      <a href="https://image.tmdb.org/t/p/original/${n.poster_path}" class="lightbox">
        <img class="movie-image" alt="${n.original_title}" src="https://image.tmdb.org/t/p/w500/${n.poster_path}"/>
      </a>
      <h3>${n.original_title}</h3>
      <p class="popularity">Popularity ${n.popularity}</p>
      <p class="genre">${n.genre_ids.map(i=>K[i]).join(",")}|${n.release_date?n.release_date.split("-")[0]:"N/A"}</p>
      <button class="add-remote-btn" data-id="${n.id}">
        ${T(n.id)?"Remove from Library":"Add to Library"}
      </button>
    `,r.classList.add("movieCard"),a.classList.add("filmCard"),r.appendChild(a),t.appendChild(r)}))}function C(){const e=document.getElementById("empty-message");if(!e)return;const t=`
    <p class="markup">
      <span>OOOPS..</span>
      <span>We are very sorry!</span>
      <span>You don't have any movies at your library</span>
    </p>
    <button type="button" class="searchBtn">Search Movie</button>
  `;e.innerHTML=t;const o=document.querySelector(".searchBtn");o&&o.addEventListener("click",()=>{A()})}function T(e){return(JSON.parse(localStorage.getItem("library"))||[]).some(o=>o.id===e)}function Q(e){const o=(JSON.parse(localStorage.getItem("library"))||[]).filter(n=>n.id!==e);localStorage.setItem("library",JSON.stringify(o)),o.length===0?C():w(o)}H();$();document.addEventListener("DOMContentLoaded",()=>{document.getElementById("hero-section")&&$(),document.getElementById("film-list")&&Z()});
//# sourceMappingURL=main-DLvQr58C.js.map
